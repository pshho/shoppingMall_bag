<html xmlns="http://www.thymeleaf.org">
<table border="">
	<tr>
		<td colspan="4">
			<h1>상품목록</h1>
		</td>
	</tr>
	<tr th:if="${#arrays.length(productsBoardList) ne 0}" th:each="no:${#numbers.sequence(0, 3)}">
		<td th:each="num:${#numbers.sequence(pd.listStart, pd.listEnd)}"
		th:if="${num &lt; (1+no)*4 and num &gt;= no*4}">
			<ul>
				<a th:href="|/shopping/shoppingDetail/${brand}/${category}/${type}/${productsBoardList[num].productsBoardId}|">
					<li>사진들어갈자리</li>
					<li th:each="brand:${brandList}"
					th:if="${brand.brandId eq productsBoardList[num].brandId}"
					th:text="${brand.brandName}"></li>
					<li th:text="${bagsList[num].bagName}"></li>
					<li th:text="${bagsList[num].bagPrice}"></li>
					<li th:text="${productsBoardList[num].intro}"></li>
				</a>
			</ul>
		</td>
	</tr>
	<tr th:unless="${#arrays.length(productsBoardList) ne 0}">
		<td colspan="4">검색된 게시글이 없습니다</td>
	</tr>
	<tr>
		<td colspan="4">
			<a th:href="|/shopping/shoppingList/${brand}/${category}/${type}/1|"><<</a>
			<a th:href="|/shopping/shoppingList/${brand}/${category}/${type}/${pd.pageLJump}|"><</a>
			<a th:each="pageNum:${#numbers.sequence(
			(pd.pageEnd eq pd.endPage)?(pd.pageEnd-4 le 0)?1:pd.pageEnd-4:pd.pageStart
			, pd.pageEnd)}"
			th:href="|/shopping/shoppingList/${brand}/${category}/${type}/${pageNum}|"
			th:text="|${(pd.pageStart eq pageNum) ? '[' + pageNum + ']' : pageNum}|">
			</a>
			<a th:href="|/shopping/shoppingList/${brand}/${category}/${type}/${pd.pageRJump}|">></a>
			<a th:href="|/shopping/shoppingList/${brand}/${category}/${type}/${pd.endPage}|">>></a>
		</td>
	</tr>
	<form action="/shopping/shoppingList/0/0/0/1" id="searForm">
		<tr>
			<td colspan="3">
				<input type="text" name="searchCont" id="searchCont" />
			</td>
			<td>
				<input type="submit" value="검색" />
			</td>
		</tr>
	</form>
	<tr>
		<td colspan="4" th:if="${session.admin ne null}">
			<a href="/shopping/shoppingWrite">글작성</a>
		</td>
	</tr>
</table>
<script>
	$(document).ready(function(){
		$('#searForm').submit(function(e){
			e.preventDefault();
			
			const search = $('#searchCont').val().trim();
			
			if(search.length == 0 || search.length > 30){
				alert('검색 내용은 1~30글자 내로 해주세요');
				return false;
			}else {
				$('#searForm').get(0).submit();
			}
		})
	})
</script>